<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<style>

	</style>
	<link href="./style.css" rel="stylesheet">
</head>

<body>
	<div id="container">
		<div id="left">
			<div id="logo">
				<img src="./svg.svg" alt="hashtag cross" width="50px" style="margin: 20px; opacity: .8;">
				<h1 id="Rdays">2#Rdays</h1>
			</div>
		</div>
		<div id="right">
			<div id="top">
				<h2>This is not a real online service! You know you need something like this in your life to help
					you realize your deepest dreams. <br>Sign up <em>now</em> to get started.</h2>
				<h2>You <em>know</em> you want to.</h2>
			</div>
			<form action="submit" onsubmit="allowSubmit" method="post">
				<div id="form">
					<h2>Let's do this!</h2>
					<div class="form-row">
						<div class="form-field"><label for="first-name">First Name</label><br><input type="text" name="first-name"
								id='first-name' required></div>
						<div class="form-field"><label for="last-name">Last Name</label><br><input type="text" name="last-name"
								id="last-name" required></div>
					</div>
					<div class="form-row">
						<div class="form-field"><label for="email">Email</label><br><input type="email" name='email' id="email" required></div>
						<div class="form-field"><label for="phone">Phone Number</label><br><input type="tel" name="phone" id="phone" required></div>
					</div>
					<div class="form-row">
						<div class="form-field"><label for="password">Password</label><br><input type="password" name='password' id='password'required></div>
						<div class="form-field"><label for="confirm-pass">Confirm Password</label><br><input type="password"name='confirm-pass'id='confirm-pass'required></div>
					</div>
				</div>
				<input type="submit"name="submit" id="submit"  onsubmit="allowSubmit" value="Create Account">
				<p>Already have an account? <a>Log in</a></p>
			</form>

			<div id="bottom">Photo by <a
					href="https://unsplash.com/@krisetya?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Markus
					Krisetya</a> on <a
					href="https://unsplash.com/s/photos/numbers?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Unsplash</a>
			</div>
		</div>

	</div>
<script>
	// const form = document.getElementsByTagName('form');
	// const fname = document.getElementById('first-name');
	// const lname = document.getElementById('last-name');
	// const email = document.getElementById('email');
	// const phone = document.getElementById('phone');
	// const pass1 = document.getElementById('password');
	// const pass2 = document.getElementById('confirm-pass');
	const submit = document.getElementById('submit');
	const formInfo = [
		{
			field: document.getElementById('first-name'),
			started:false,
			valid: false
		}, {
			field: document.getElementById('last-name'),
			started:false,
			valid:false
		},{
			field: document.getElementById('email'),
			started:false,
			valid:false
		},{
			field: document.getElementById('phone'),
			started:false,
			valid:false
		},{
			field: document.getElementById('password'),
			started:false,
			valid:false
		},{
			field: document.getElementById('confirm-pass'),
			started:false,
			valid:false
		}]
function removeError(elem){
	if (elem.classList.contains('error')){
		elem.classList.remove('error');
	}
}
function addError(elem){
	if (!elem.classList.contains('error')){
		elem.classList.add('error');
	}
}
	function checkInput(q){
		//chekc only if started
		if(formInfo[q].started){
		//first and last name
		if (q<2){
			if(formInfo[q].field.value.length >1 ){
				formInfo[q].valid=true;
				removeError(formInfo[q].field)
			} else {formInfo[q].valid=false; 
			addError(formInfo[q].field)}
		}//email
		if(q==2){
			var emailID = formInfo[2].field.value;
			atpos = emailID.indexOf("@");
			dotpos = emailID.lastIndexOf('.');
			if (atpos < 1 || (dotpos - atpos < 2)){
				formInfo[q].valid=false;
				addError(formInfo[q].field);
			} else{ formInfo[q].valid=true;
			removeError(formInfo[q].field)}
		}//phone
		if(q==3){
			let num="";
			for (char of formInfo[3].field.value){
				if (char==='/\d/'){ num.join(char)}
			} console.log(num)
			if (num.length>10){
				formInfo[3].valid==true;
				removeError(formInfo[3].field)
			} else {addError(formInfo[3].field);
			formInfo[3].valid=false;
			}
		}//password
		if(q==4){
			if (formInfo[4].field.value.length>7){
				formInfo[4].valid==true;
				removeError(formInfo[4].field)
			} else {addError(formInfo[4].field);
			formInfo[4].valid=false;}
		}//confirm password
		if(q==5) {
			if (formInfo[5].field.value === formInfo[4].field.value) {
				formInfo[5].valid==true;
				removeError(formInfo[5].field)
			} else {addError(formInfo[5].field);
			formInfo[5].valid=false;}
		};}}


	function allowSubmit(){
		for (item of formInfo){ 
			if(!item.valid){
				submit.classList.add('error');
				return false;
			} 
		} submit.classList.remove('error')
		return false;
	}
	function getField(e){
		for(let q=0; q<formInfo.length; q++){
			if(formInfo[q].field === document.activeElement){
				formInfo[q].started=true;
			} else checkInput(q)
	}}
	
	formInfo.forEach(item => item.field.addEventListener("input",getField));

</script>
</body>

</html>